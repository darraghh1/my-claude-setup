<mxGraphModel>
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />

    <!-- Title -->
    <mxCell id="title" value="Claude Code Development Pipeline" style="text;fontSize=20;fontStyle=1;fontColor=#1e293b;align=center;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="200" y="15" width="560" height="30" as="geometry" />
    </mxCell>
    <mxCell id="subtitle" value="From idea to shipped code — with 5 quality layers" style="text;fontSize=12;fontStyle=0;fontColor=#6b7280;align=center;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="250" y="45" width="460" height="20" as="geometry" />
    </mxCell>

    <!-- LEFT: Planning Container -->
    <mxCell id="plan-container" value="PLANNING" style="rounded=1;fillColor=#eff6ff;gradientColor=#dbeafe;gradientDirection=south;strokeColor=#93c5fd;strokeWidth=1.5;fontSize=13;fontStyle=1;fontColor=#1d4ed8;verticalAlign=top;shadow=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="30" y="80" width="400" height="695" as="geometry" /></mxCell>

    <!-- /create-plan -->
    <mxCell id="create-plan" value="/create-plan" style="rounded=1;fillColor=#ffffff;strokeColor=#3b82f6;fontColor=#2563eb;fontSize=13;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="165" y="115" width="130" height="40" as="geometry" />
    </mxCell>

    <!-- Clarify -->
    <mxCell id="clarify" value="Clarify Requirements" style="rounded=1;fillColor=#ffffff;strokeColor=#3b82f6;fontColor=#2563eb;fontSize=12;fontStyle=0;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="155" y="180" width="150" height="35" as="geometry" />
    </mxCell>
    <mxCell id="e-cp-clarify" style="endArrow=block;endFill=1;strokeColor=#3b82f6;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="create-plan" target="clarify" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Planner group -->
    <mxCell id="planner-group" value="Planner (ephemeral, fresh 200K context)" style="rounded=1;fillColor=#faf5ff;gradientColor=#f3e8ff;gradientDirection=south;strokeColor=#a78bfa;strokeWidth=1.5;fontSize=10;fontStyle=1;fontColor=#7c3aed;verticalAlign=top;dashed=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="90" y="240" width="280" height="155" as="geometry" />
    </mxCell>
    <mxCell id="plan-read" value="Read templates + codebase refs" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="120" y="268" width="220" height="30" as="geometry" />
    </mxCell>
    <mxCell id="plan-create" value="Create plan.md + phase files" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="120" y="306" width="220" height="30" as="geometry" />
    </mxCell>
    <mxCell id="plan-validate" value="Self-validate each phase" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="120" y="344" width="220" height="30" as="geometry" />
    </mxCell>
    <mxCell id="e-clarify-planner" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="clarify" target="planner-group" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- User Checkpoint -->
    <mxCell id="user-check" value="User
Checkpoint" style="rhombus;fillColor=#ffffff;strokeColor=#6b7280;fontColor=#374151;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="180" y="420" width="100" height="70" as="geometry" />
    </mxCell>
    <mxCell id="e-planner-check" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="planner-group" target="user-check" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Revise loop -->
    <mxCell id="e-check-revise" value="Revise" style="endArrow=block;endFill=1;strokeColor=#d97706;strokeWidth=1.5;fontColor=#d97706;fontSize=10;fontStyle=1;exitX=0;exitY=0.5;entryX=0;entryY=0.5;curved=1;" edge="1" source="user-check" target="planner-group" parent="1">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="55" y="455" />
          <mxPoint x="55" y="318" />
        </Array>
      </mxGeometry>
    </mxCell>

    <!-- /review-plan -->
    <mxCell id="review-plan" value="/review-plan" style="rounded=1;fillColor=#ffffff;strokeColor=#22c55e;fontColor=#166534;fontSize=12;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="165" y="520" width="130" height="35" as="geometry" />
    </mxCell>
    <mxCell id="review-note" value="Batched validators (max 4)
One file per agent
Template + codebase compliance" style="rounded=1;fillColor=#fefce8;strokeColor=#eab308;fontColor=#a16207;fontSize=10;dashed=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="300" y="508" width="125" height="55" as="geometry" />
    </mxCell>
    <mxCell id="e-review-note" style="endArrow=none;strokeColor=#eab308;strokeWidth=1;dashed=1;dashPattern=4 3;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" source="review-plan" target="review-note" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e-check-review" value="Approve" style="endArrow=block;endFill=1;strokeColor=#22c55e;strokeWidth=1.5;fontColor=#166534;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="user-check" target="review-plan" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Pass diamond -->
    <mxCell id="review-pass" value="Pass?" style="rhombus;fillColor=#ffffff;strokeColor=#6b7280;fontColor=#374151;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="190" y="580" width="80" height="55" as="geometry" />
    </mxCell>
    <mxCell id="e-review-pass" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="review-plan" target="review-pass" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Fix loop -->
    <mxCell id="e-review-fix" value="Fix" style="endArrow=block;endFill=1;strokeColor=#ef4444;strokeWidth=1.5;fontColor=#dc2626;fontSize=10;fontStyle=1;exitX=0;exitY=0.5;entryX=0;entryY=0.85;curved=1;" edge="1" source="review-pass" target="planner-group" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="68" y="608" /><mxPoint x="68" y="372" /></Array></mxGeometry></mxCell>

    <!-- /audit-plan -->
    <mxCell id="audit-plan" value="/audit-plan" style="rounded=1;fillColor=#ffffff;strokeColor=#3b82f6;fontColor=#2563eb;fontSize=12;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="165" y="660" width="130" height="35" as="geometry" />
    </mxCell>
    <mxCell id="e-pass-audit" value="Yes" style="endArrow=block;endFill=1;strokeColor=#22c55e;strokeWidth=1.5;fontColor=#166534;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="review-pass" target="audit-plan" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Plan Ready -->
    <mxCell id="plan-ready" value="Plan Ready" style="rounded=1;arcSize=50;fillColor=#dcfce7;strokeColor=#16a34a;fontColor=#15803d;fontSize=13;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1">
      <mxGeometry x="173" y="720" width="115" height="35" as="geometry" />
    </mxCell>
    <mxCell id="e-audit-ready" style="endArrow=block;endFill=1;strokeColor=#22c55e;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="audit-plan" target="plan-ready" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

  <mxCell id="impl-container" value="IMPLEMENTATION" style="rounded=1;fillColor=#fafafa;strokeColor=#d1d5db;strokeWidth=1.5;fontSize=13;fontStyle=1;fontColor=#374151;verticalAlign=top;shadow=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="460" y="80" width="490" height="965" as="geometry" /></mxCell><mxCell id="implement" value="/implement" style="rounded=1;fillColor=#ffffff;strokeColor=#6b7280;fontColor=#374151;fontSize=13;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="640" y="115" width="130" height="40" as="geometry" /></mxCell><mxCell id="gate-checks" value="Gate Checks
Plan review ✓ Flow audit ✓
No placeholders ✓" style="rounded=1;fillColor=#fefce8;strokeColor=#eab308;fontColor=#a16207;fontSize=10;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="790" y="107" width="145" height="55" as="geometry" /></mxCell><mxCell id="e-impl-gate" style="endArrow=none;strokeColor=#eab308;strokeWidth=1;dashed=1;dashPattern=4 3;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" source="implement" target="gate-checks" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="group-loop" value="For Each Group (sequential)" style="rounded=1;fillColor=#f8fafc;strokeColor=#94a3b8;strokeWidth=1;fontSize=11;fontStyle=1;fontColor=#475569;verticalAlign=top;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="480" y="180" width="470" height="785" as="geometry" /></mxCell><mxCell id="e-impl-loop" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="implement" target="group-loop" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="builder-group" value="Builder (ephemeral, per phase — max 2 parallel)" style="rounded=1;fillColor=#faf5ff;gradientColor=#f3e8ff;gradientDirection=south;strokeColor=#a78bfa;strokeWidth=1.5;fontSize=10;fontStyle=1;fontColor=#7c3aed;verticalAlign=top;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="585" y="215" width="240" height="160" as="geometry" /></mxCell><mxCell id="b-ref" value="Find reference + domain skill" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="245" width="200" height="28" as="geometry" /></mxCell><mxCell id="b-tdd" value="TDD first, then implement" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="281" width="200" height="28" as="geometry" /></mxCell><mxCell id="b-verify" value="tests + typecheck + E2E/DB" style="rounded=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontColor=#7c3aed;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="317" width="200" height="28" as="geometry" /></mxCell><mxCell id="validator-group" value="Validator (ephemeral, per phase)" style="rounded=1;fillColor=#f0fdf4;gradientColor=#dcfce7;gradientDirection=south;strokeColor=#4ade80;strokeWidth=1.5;fontSize=10;fontStyle=1;fontColor=#15803d;verticalAlign=top;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="585" y="420" width="240" height="120" as="geometry" /></mxCell><mxCell id="v-review" value="/code-review + auto-fix" style="rounded=1;fillColor=#ffffff;strokeColor=#22c55e;fontColor=#166534;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="450" width="200" height="28" as="geometry" /></mxCell><mxCell id="v-verify" value="tests + typecheck + E2E/DB" style="rounded=1;fillColor=#ffffff;strokeColor=#22c55e;fontColor=#166534;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="486" width="200" height="28" as="geometry" /></mxCell><mxCell id="e-builder-validator" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="builder-group" target="validator-group" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="result-diamond" value="Result" style="rhombus;fillColor=#ffffff;strokeColor=#6b7280;fontColor=#374151;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="665" y="580" width="80" height="55" as="geometry" /></mxCell><mxCell id="e-validator-result" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="validator-group" target="result-diamond" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="phase-done" value="Phase Done" style="rounded=1;fillColor=#f0fdf4;strokeColor=#22c55e;fontColor=#166534;fontSize=12;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="650" y="680" width="110" height="35" as="geometry" /></mxCell><mxCell id="e-result-pass" value="PASS" style="endArrow=block;endFill=1;strokeColor=#22c55e;strokeWidth=1.5;fontColor=#166534;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="result-diamond" target="phase-done" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-result-fail" value="FAIL" style="endArrow=block;endFill=1;strokeColor=#ef4444;strokeWidth=1.5;fontColor=#dc2626;fontSize=10;fontStyle=1;exitX=0;exitY=0.5;entryX=0;entryY=0.5;edgeStyle=orthogonalEdgeStyle;labelBackgroundColor=#ffffff;" edge="1" source="result-diamond" target="builder-group" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="555" y="608" /><mxPoint x="555" y="295" /></Array></mxGeometry></mxCell><mxCell id="auditor-box" value="Auditor (ephemeral, runs alone)" style="rounded=1;fillColor=#fff7ed;gradientColor=#ffedd5;gradientDirection=south;strokeColor=#fb923c;strokeWidth=1.5;fontSize=10;fontStyle=1;fontColor=#c2410c;verticalAlign=top;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="585" y="755" width="240" height="105" as="geometry" /></mxCell><mxCell id="a-cross" value="Cross-phase regressions" style="rounded=1;fillColor=#ffffff;strokeColor=#fb923c;fontColor=#c2410c;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="783" width="200" height="28" as="geometry" /></mxCell><mxCell id="a-drift" value="Deferred items + plan drift" style="rounded=1;fillColor=#ffffff;strokeColor=#fb923c;fontColor=#c2410c;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="605" y="819" width="200" height="28" as="geometry" /></mxCell><mxCell id="e-phasedone-auditor" value="All group phases pass" style="endArrow=block;endFill=1;strokeColor=#fb923c;strokeWidth=1.5;fontColor=#c2410c;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;labelBackgroundColor=#ffffff;" edge="1" source="phase-done" target="auditor-box" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="triage-diamond" value="Triage" style="rhombus;fillColor=#ffffff;strokeColor=#6b7280;fontColor=#374151;fontSize=11;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="665" y="890" width="80" height="55" as="geometry" /></mxCell><mxCell id="e-auditor-triage" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="auditor-box" target="triage-diamond" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="triage-note" value="Clean/Low → next group
Medium → auto-fix
High/Critical → ask user" style="rounded=1;fillColor=#fefce8;strokeColor=#eab308;fontColor=#a16207;fontSize=10;dashed=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="490" y="880" width="155" height="48" as="geometry" /></mxCell><mxCell id="e-triage-note" style="endArrow=none;strokeColor=#eab308;strokeWidth=1;dashed=1;dashPattern=4 3;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" edge="1" source="triage-diamond" target="triage-note" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-next-group" value="Next group" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=1.5;fontColor=#374151;fontSize=10;fontStyle=1;edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;entryX=1;entryY=0;" edge="1" source="triage-diamond" target="builder-group" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="920" y="918" /><mxPoint x="920" y="215" /></Array></mxGeometry></mxCell><mxCell id="all-done" value="All Done" style="rounded=1;arcSize=50;fillColor=#dcfce7;strokeColor=#16a34a;fontColor=#15803d;fontSize=14;fontStyle=1;shadow=1;whiteSpace=wrap;" vertex="1" parent="1"><mxGeometry x="645" y="985" width="120" height="38" as="geometry" /></mxCell><mxCell id="e-triage-done" value="All groups done" style="endArrow=block;endFill=1;strokeColor=#22c55e;strokeWidth=1.5;fontColor=#166534;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" source="triage-diamond" target="all-done" parent="1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-planready-impl" value="handoff" style="endArrow=block;endFill=1;strokeColor=#6b7280;strokeWidth=2;dashed=1;dashPattern=8 4;exitX=1;exitY=0.5;entryX=0;entryY=0.5;edgeStyle=orthogonalEdgeStyle;fontColor=#6b7280;fontSize=10;fontStyle=2;labelBackgroundColor=#ffffff;" edge="1" source="plan-ready" target="implement" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="445" y="738" /><mxPoint x="445" y="135" /></Array></mxGeometry></mxCell><mxCell id="quality-bar" value="5 Quality Layers:  1. PostToolUse hook (every write)   2. Builder verification   3. Validator /code-review   4. Validator verification   5. Group audit" style="rounded=1;fillColor=#f8fafc;strokeColor=#cbd5e1;fontColor=#475569;fontSize=10;fontStyle=0;whiteSpace=wrap;align=center;" vertex="1" parent="1"><mxGeometry x="30" y="1058" width="940" height="28" as="geometry" /></mxCell></root>
</mxGraphModel>